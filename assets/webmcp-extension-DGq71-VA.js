const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DAjVTe73.js","assets/types-DzpHD1lz.js","assets/main-CKpV1Fmo.js","assets/main-DCTlflHk.css"])))=>i.map(i=>d[i]);
import{j as c,x,a7 as g,a8 as C,_ as y}from"./main-CKpV1Fmo.js";import{e as E}from"./ai-service-CQQZNZjX.js";async function _(){typeof navigator>"u"||navigator.modelContext||await y(()=>import("./index-DAjVTe73.js"),__vite__mapDeps([0,1,2,3]))}function v(t){return{type:"object",properties:t.properties,required:t.required}}function m(t){return{content:[{type:"text",text:t}]}}function p(t,a,o,r){if(r.has(t.id)||!navigator.modelContext)return;const u=c.createExecutionContext?.()??{},i=a.commandToTool(t,u),d=t.id,e=navigator.modelContext.registerTool({name:i.function.name,description:i.function.description,inputSchema:v(i.function.parameters),async execute(f){try{const s=c.createExecutionContext?.(f)??{params:f??{}},n=await c.execute(d,s),l=n==null?"Done":typeof n=="object"?JSON.stringify(n):String(n);return m(l)}catch(s){const n=s instanceof Error?s.message:String(s);return m(`Error: ${n}`)}}});o.push(e),r.add(t.id)}const b=async t=>{if(await _(),!navigator.modelContext)return;const a=new E,o=[],r=new Set,u=Object.values(c.listCommands());for(const e of u)p(e,a,o,r);const i=x(g,e=>{p(e,a,o,r)}),d=()=>{C(i),o.forEach(e=>e.unregister())};typeof window<"u"&&window.addEventListener("pagehide",d)};export{b as default};
