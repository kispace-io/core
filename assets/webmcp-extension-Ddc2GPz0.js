const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-ah14EH2p.js","assets/types-HWclk0JI.js","assets/main-DA3mdgRZ.js","assets/main-DCTlflHk.css"])))=>i.map(i=>d[i]);
import{f,s as g,T as x,u as C,_ as y}from"./main-DA3mdgRZ.js";import{T}from"./ai-service-Xbmu7sjO.js";import"./in-browser-ml-service-D9cxY0Oa.js";async function E(){typeof navigator>"u"||navigator.modelContext||await y(()=>import("./index-ah14EH2p.js"),__vite__mapDeps([0,1,2,3]))}function _(t){return{type:"object",properties:t.properties,required:t.required}}function m(t){return{content:[{type:"text",text:t}]}}function p(t,c,o,r,i){if(i.has(t.id)||!navigator.modelContext)return;const s=c.commandToTool(t,o),u=t.id,d=navigator.modelContext.registerTool({name:s.function.name,description:s.function.description,inputSchema:_(s.function.parameters),async execute(e){try{const a={...o,params:e??{}},n=await f.execute(u,a),l=n==null?"Done":typeof n=="object"?JSON.stringify(n):String(n);return m(l)}catch(a){const n=a instanceof Error?a.message:String(a);return m(`Error: ${n}`)}}});r.push(d),i.add(t.id)}const S=async t=>{if(await E(),!navigator.modelContext)return;const c=new T,o=f.createExecutionContext?.()??{},r=[],i=new Set,s=Object.values(f.listCommands());for(const e of s)p(e,c,o,r,i);const u=g(x,e=>{p(e,c,o,r,i)}),d=()=>{C(u),r.forEach(e=>e.unregister())};typeof window<"u"&&window.addEventListener("pagehide",d)};export{S as default};
